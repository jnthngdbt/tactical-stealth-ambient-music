var C=Object.defineProperty;var E=(o,e,t)=>e in o?C(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>E(o,typeof e!="symbol"?e+"":e,t);import{g as k,a as b,V as j,b as u,c as W,d as F,W as L,n as H,i as Y,h as I,o as R}from"./three.module-D_lgyIuw.js";import{E as X,R as T}from"./RenderPass-o2zfdpRC.js";const c=new k({uniforms:{resolution:{value:new b(window.innerWidth,window.innerHeight)},pixelSize:{value:3},time:{value:0},noiseIntensity:{value:.1},diffuseTexture:{value:null}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}
	`,fragmentShader:`
		uniform vec2 resolution;
		uniform float pixelSize;
		uniform float time;
		uniform float noiseIntensity;
		uniform sampler2D diffuseTexture; // Renamed
		varying vec2 vUv;

		// Generate random noise
		float random(vec2 st) {
			return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
		}

		void main() {
			// Sample the texture normally, without pixelation
			vec4 texColor = texture2D(diffuseTexture, vUv);

			// Calculate pixelation size and coordinates
			vec2 dxy = pixelSize / resolution;
			vec2 coord = dxy * floor(vUv / dxy);

			// Add pixelated noise
			float noise = random(coord * time) * noiseIntensity;
			texColor.rgb += noise;

			gl_FragColor = texColor;
		}
	`});class U{constructor(e,t,a,s,d){n(this,"window");n(this,"camera");n(this,"renderer");n(this,"composer");n(this,"planeSize");n(this,"isPanning",!1);n(this,"panSpeedFactor",10);n(this,"minZoomCameraPosZ",.8);n(this,"isSideZooming",!1);n(this,"sideZoomZoneWidth",.15);n(this,"sideZoomPos",0);n(this,"scrollZoomSpeedFactor",.001);n(this,"sideZoomSpeedFactor",.002);n(this,"startMouse",new b);n(this,"startCameraPosition",new j);this.window=e,this.camera=t,this.renderer=a,this.composer=s,this.planeSize=d,e.addEventListener("mousedown",i=>{this.isSideZoomZone(i.clientX)?this.onSideZoomStart(i.clientY):this.onPanStart(i.clientX,i.clientY)}),e.addEventListener("mousemove",i=>{this.isSideZooming?this.onSideZoom(i.clientY):this.onPan(i.clientX,i.clientY)}),e.addEventListener("mouseup",()=>{this.isSideZooming?this.onSideZoomEnd():this.onPanEnd()}),e.addEventListener("touchstart",i=>{this.isSideZoomZone(i.touches[0].clientX)?this.onSideZoomStart(i.touches[0].clientY):this.onPanStart(i.touches[0].clientX,i.touches[0].clientY)}),e.addEventListener("touchmove",i=>{this.isSideZooming?this.onSideZoom(i.touches[0].clientY):this.onPan(i.touches[0].clientX,i.touches[0].clientY)}),e.addEventListener("touchend",()=>{this.isSideZooming?this.onSideZoomEnd():this.onPanEnd()}),e.addEventListener("wheel",i=>{this.onZoom(i.deltaY*this.scrollZoomSpeedFactor)}),e.addEventListener("resize",()=>{this.onResize()})}update(e){}isSideZoomZone(e){return e/this.window.innerWidth>1-this.sideZoomZoneWidth}onSideZoomStart(e){this.isSideZooming=!0,this.sideZoomPos=e}onSideZoom(e){const t=e-this.sideZoomPos;this.sideZoomPos=e,this.onZoom(t*this.sideZoomSpeedFactor)}onSideZoomEnd(){this.isSideZooming=!1}onZoom(e){this.camera.position.z+=e*this.camera.position.z,this.restrictCameraPosition()}onPanStart(e,t){this.isPanning=!0,this.startMouse.set(e,t),this.startCameraPosition.copy(this.camera.position)}onPanEnd(){this.isPanning=!1}onPan(e,t){if(!this.isPanning)return;const a=(e-this.startMouse.x)/this.window.innerWidth,s=(t-this.startMouse.y)/this.window.innerHeight;this.camera.position.x=this.startCameraPosition.x+a*this.panSpeedFactor,this.camera.position.y=this.startCameraPosition.y-s*this.panSpeedFactor,this.restrictCameraPosition()}onResize(){this.camera.aspect=this.window.innerWidth/this.window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.innerWidth,this.window.innerHeight),this.composer.setSize(this.window.innerWidth,this.window.innerHeight),this.restrictCameraPosition()}restrictCameraPosition(){const t=this.camera.position.z,a=.85*this.camera.fov/2*(Math.PI/180),s=this.camera.aspect,d=2*t*Math.tan(a),i=d*s,S=(this.planeSize.x-i)/2,w=(this.planeSize.y-d)/2,M=this.planeSize.y/(2*Math.tan(a)),P=this.planeSize.x/(2*Math.tan(a)*s),z=Math.min(M,P);this.camera.position.x=u.clamp(this.camera.position.x,-S,S),this.camera.position.y=u.clamp(this.camera.position.y,-w,w),this.camera.position.z=u.clamp(this.camera.position.z,this.minZoomCameraPosZ,z)}}class D{constructor(e,t=.0015,a=2){n(this,"camera");n(this,"amplitude",.0015);n(this,"speed",2);this.camera=e,this.amplitude=t,this.speed=a}update(e){const t=e/this.speed;this.camera.position.x+=Math.sin(t)*this.amplitude*(Math.random()-.5),this.camera.position.y+=Math.cos(t)*this.amplitude*(Math.random()-.5)}}const p=new W,m=new F(75,window.innerWidth/window.innerHeight,.1,1e3);m.position.z=2;const l=new L({antialias:!0});l.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(l.domElement);const _=["jnthngdbt_Dark_theme_heavily_defended_concrete_multi-building_b_2e4dae5c-a670-4c21-a6c0-abe8f0757a25.png","jnthngdbt_Dark_theme_heavily_defended_concrete_multi-building_b_f081fe34-33ad-4b6b-bf7d-63a0b79bb8b8.png","jnthngdbt_Dark_theme_heavily_fortified_concrete_multi-building__71c05842-c354-4d31-bd7c-fc93629f3f38.png","jnthngdbt_Heavily_defended_desert_concrete_multi-building_bunke_4e449e81-c3bd-4d08-94ec-aa464fb40833.png","jnthngdbt_Heavily_fortified_and_defended_desert_concrete_multi-_0a2ed1db-e1f4-4419-8dbf-ce26f915394e.png","jnthngdbt_Midnight_cyberpunk_concrete_multi-building_bunker_com_74d166ca-8493-4f48-a146-64ca25121cab.png","jnthngdbt_Midnight_cyberpunk_concrete_multi-building_bunker_com_92a6a60d-4ee6-40bd-82ed-1df5387ec3a8.png","jnthngdbt_Midnight_cyberpunk_concrete_multi-building_bunker_com_354daa91-edcb-4e11-a44f-f56a098819f8.png","jnthngdbt_Midnight_cyberpunk_concrete_multi-building_bunker_com_0701d598-e389-4b2a-a124-7589788e4d04.png","jnthngdbt_Midnight_cyberpunk_concrete_multi-building_bunker_com_ce184244-4427-4403-9573-914a55257101.png","jnthngdbt_Midnight_futuristic_concrete_multi-building_bunker_co_6cc95bcb-8818-4a4b-882c-8f8367139ad8.png","jnthngdbt_Midnight_futuristic_concrete_multi-building_bunker_co_cdcc27e2-b964-4ba4-9990-92acce687e7c.png","jnthngdbt_Midnight_futuristic_concrete_multi-building_bunker_co_cf4c2416-c763-45a1-8ef7-d1381616799a.png","jnthngdbt_Midnight_heavily_defended_desert_concrete_multi-build_4a24248c-3833-4961-bb7f-372992a6cb87.png","jnthngdbt_Midnight_heavily_defended_desert_concrete_multi-build_f0371757-ae87-48d0-b7c5-856f2e4edb59.png"],B="https://raw.githubusercontent.com/jnthngdbt/tactical-steath-ambient-music-assets/refs/heads/main/binoculars/high-res/";var h=new b(0,0),g;const V=new H;function f(o){o<0?r=_.length-1:o>=_.length?r=0:r=o;const e=_[r];V.load(B+e,t=>{c.uniforms.diffuseTexture.value=t,c.uniforms.resolution.value.set(t.image.width,t.image.height);const a=t.image.width/t.image.height;h.set(10,10/a);const s=new Y(h.x,h.y);p.remove(g),g=new I(s,c),p.add(g)})}var r=3;f(r);var Z;(Z=document.getElementById("prevImageBtn"))==null||Z.addEventListener("click",()=>f(r-1));var x;(x=document.getElementById("nextImageBtn"))==null||x.addEventListener("click",()=>f(r+1));const v=new X(l);v.addPass(new T(p,m));var A=new U(window,m,l,v,h),G=new D(m,.0015,2);const J=new R;function y(){const o=J.getElapsedTime();c.uniforms.time.value=o,A.update(o),G.update(o),requestAnimationFrame(y),v.render()}y();
